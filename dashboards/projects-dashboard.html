<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>داشبورد پروژه‌ها</title>
  <link rel="stylesheet" href="../assets/css/style.css">
  <style>
    .status-green { background-color: #d4edda; }
    .status-yellow { background-color: #fff3cd; }
    .status-red { background-color: #f8d7da; }
    .btn-link { padding: 4px 8px; background: #007bff; color: white; text-decoration: none; border-radius: 4px; }
  </style>
</head>
<body>

  <section>
    <h1>📁 داشبورد پروژه‌های راهبردی</h1>
    <p>این صفحه وضعیت پروژه‌های کلیدی را نمایش می‌دهد و دسترسی به فرم‌ها و مستندات مرتبط را فراهم می‌سازد.</p>

    <table>
      <thead>
        <tr>
          <th>عنوان پروژه</th>
          <th>مسئول اجرا</th>
          <th>تاریخ شروع</th>
          <th>تاریخ پایان</th>
          <th>وضعیت</th>
          <th>مستندات</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </section>

  <script>
    fetch('../data/projects.json')
      .then(response => response.json())
      .then(data => {
        const tbody = document.querySelector('table tbody');

        data.forEach(project => {
          const tr = document.createElement('tr');
          tr.className = `status-${project.statusColor}`;

          const statusIcon = project.status === 'Completed' ? '✅' :
                             project.status === 'Ongoing' ? '⏳' : '🚧';

          tr.innerHTML = `
            <td>${project.title}</td>
            <td>${project.owner}</td>
            <td>${project.start}</td>
            <td>${project.end}</td>
            <td>${translateStatus(project.status)} ${statusIcon}</td>
            <td><a href="${project.linkUrl}" class="btn-link">${translateLink(project.linkText)}</a></td>
          `;

          tbody.appendChild(tr);
        });

        function translateStatus(status) {
          return {
            'Completed': 'تکمیل‌شده',
            'Ongoing': 'در حال پیشرفت',
            'Not Started': 'در انتظار شروع'
          }[status] || status;
        }

        function translateLink(text) {
          return {
            'View Form': 'مشاهده فرم',
            'View Dashboard': 'مشاهده داشبورد',
            'Coming Soon': 'در دست اقدام'
          }[text] || text;
        }
      })
      .catch(error => {
        console.error('خطا در بارگذاری داده‌های پروژه:', error);
      });
  </script>

</body>
</html>
